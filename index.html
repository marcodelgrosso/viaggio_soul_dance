<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viaggio Soul Dance - Le tue mete da sogno</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <i class="fas fa-plane"></i>
                    <h1>Viaggio Soul Dance</h1>
                    <p>Accedi per votare le destinazioni</p>
                </div>
                <div class="login-form">
                    <div class="form-group">
                        <label for="loginUserCode">
                            <i class="fas fa-user"></i> Il tuo codice (es: nome.cognome)
                        </label>
                        <input type="text" id="loginUserCode" placeholder="Il tuo codice identificativo" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input-wrapper">
                            <input type="password" id="loginPassword" placeholder="Password di accesso" class="form-input">
                            <i class="fas fa-eye password-toggle" onclick="togglePasswordVisibility()" id="passwordToggle"></i>
                        </div>
                    </div>
                    <p id="loginError" class="login-error"></p>
                    <button class="login-btn" onclick="handleLogin()">
                        <i class="fas fa-sign-in-alt"></i>
                        Accedi
                    </button>
                </div>
                <div class="login-footer">
                    <p>Viaggio Soul Dance - Dicembre 2024</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenuto principale (mostrato solo dopo login) -->
    <div id="mainContent" class="main-content" style="display: none;">
    <!-- Fixed Header (sempre visibile in alto) -->
    <div id="fixedHeader" class="fixed-header">
        <div class="fixed-header-content">
            <div class="fixed-header-user">
                <i class="fas fa-user-circle"></i>
                <span id="fixedHeaderUserName"></span>
                <span id="fixedHeaderBadge" class="fixed-header-badge" style="display: none;">
                    <i class="fas fa-shield-alt"></i> Admin
                </span>
            </div>
            <button class="fixed-header-logout" onclick="logout()" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </div>
    
    <!-- Scroll Header (appare quando si scrolla) -->
    <div id="scrollHeader" class="scroll-header">
        <div class="scroll-header-content">
            <div class="scroll-header-user">
                <i class="fas fa-user-circle"></i>
                <span id="scrollHeaderUserName"></span>
            </div>
            <div class="scroll-header-actions">
                <button class="scroll-logout-btn" onclick="logout()" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Esci</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Admin Dashboard (solo per admin) -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <div class="admin-dashboard-content">
            <div class="admin-dashboard-header">
                <div class="admin-dashboard-title">
                    <i class="fas fa-chart-bar"></i>
                    <h2>Dashboard Votazioni</h2>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button class="admin-refresh-btn" onclick="openAdminVotesModal()" title="Aggiorna votazioni">
                        <i class="fas fa-sync-alt"></i>
                        Vedi tutte le votazioni
                    </button>
                    <button class="admin-reset-btn" onclick="resetFirstLogins()" title="Ripulisci primi accessi di test">
                        <i class="fas fa-trash-alt"></i>
                        Reset primi accessi
                    </button>
                </div>
            </div>
            <div id="adminVotesPreview" class="admin-votes-preview">
                <p>Caricamento votazioni...</p>
            </div>
            
            <!-- Sezione primi login -->
            <div id="firstLoginsSection" class="first-logins-section">
                <h3><i class="fas fa-user-check"></i> Primi accessi oggi</h3>
                <div id="firstLoginsList" class="first-logins-list">
                    <p>Caricamento...</p>
                </div>
            </div>
        </div>
    </div>

    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-plane"></i>
                <span>Viaggio Soul Dance</span>
            </div>
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#destinations">Destinazioni</a>
                <a href="#about">Chi Siamo</a>
                <a href="#contact">Contatti</a>
                <div id="userInfoNav" class="user-info-nav" style="display: none;">
                    <i class="fas fa-user-circle"></i>
                    <span id="userNameNav"></span>
                </div>
                <button id="adminVotesBtn" class="admin-btn" onclick="openAdminVotesModal()" title="Vedi tutte le votazioni" style="display: none;">
                    <i class="fas fa-chart-bar"></i>
                    <span>Vedi votazioni</span>
                </button>
                <button class="logout-btn" onclick="logout()" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Esci</span>
                </button>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Viaggio Soul Dance</h1>
                <p class="travel-dates">6 Dicembre - 8 Dicembre 2024</p>
                <p>Scopri le tue mete europee da sogno in un weekend indimenticabile</p>
                <button class="cta-button" onclick="scrollToDestinations()">
                    <i class="fas fa-compass"></i>
                    Esplora le destinazioni
                </button>
            </div>
            <div class="hero-image">
                <div class="floating-elements">
                    <div class="floating-element element-1"><i class="fas fa-plane"></i></div>
                    <div class="floating-element element-2"><i class="fas fa-compass"></i></div>
                    <div class="floating-element element-3"><i class="fas fa-suitcase-rolling"></i></div>
                </div>
            </div>
        </section>

        <!-- Destinations Section -->
        <section id="destinations" class="destinations">
            <div class="container">
                <h2>Le nostre destinazioni</h2>
                <p class="section-subtitle">Scegli la tua prossima avventura</p>
                
                <div class="destinations-grid">
                    <!-- Destination 1 -->
                    <div class="destination-card" onclick="openDestination('seville')">
                        <div class="card-image">
                            <img src="https://images.unsplash.com/photo-1558642452-9d2a7deb7f62?w=800&h=600&fit=crop&crop=center" alt="Siviglia" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZjU1NzZjIi8+Cjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5TaXZpZ2xpYTwvdGV4dD4KPC9zdmc+'">
                            <div class="price-badge">
                                <div class="price-item">
                                    <i class="fas fa-plane"></i>
                                    <span>€75-100</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <h3>Siviglia, Spagna</h3>
                            <p>Il cuore dell'Andalusia tra flamenco e architettura moresca</p>
                            <div class="card-features">
                                <span class="feature"><i class="fas fa-music"></i> Flamenco</span>
                                <span class="feature"><i class="fas fa-mosque"></i> Architettura</span>
                                <span class="feature"><i class="fas fa-sun"></i> Clima</span>
                            </div>
                            <div class="price-details">
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-plane"></i> Volo:</span>
                                    <span class="price-value">€75-100</span>
                                </div>
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-bed"></i> Hotel:</span>
                                    <span class="price-value">Da definire</span>
                                </div>
                                <div class="price-actions">
                                    <a href="https://www.skyscanner.it/transport/flights/rome/svq/251206/251208/config/11493-2512062125--31915-0-16628-2512070010%7C16628-2512082050--30596-0-11493-2512082335?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=1&preferdirects=true&outboundaltsenabled=false&inboundaltsenabled=false&sortby=cheapest" target="_blank" class="flight-details-btn" onclick="event.stopPropagation()">
                                        <i class="fas fa-external-link-alt"></i>
                                        Vedi dettagli volo
                                    </a>
                                </div>
                            </div>
                            <div class="card-buttons-container">
                                <button class="card-button">
                                    Scopri il viaggio <i class="fas fa-arrow-right"></i>
                                </button>
                                <button class="card-vote-button" onclick="event.stopPropagation(); openVotingModal('seville')">
                                    <i class="fas fa-vote-yea"></i>
                                    Vota questa destinazione
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Destination 2 -->
                    <div class="destination-card" onclick="openDestination('london')">
                        <div class="card-image">
                            <img src="https://images.unsplash.com/photo-1533929736458-ca588d08c8be?w=800&h=600&fit=crop&crop=center" alt="Londra" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjNjY3ZWVhIi8+Cjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Mb25kcmE8L3RleHQ+Cjwvc3ZnPg=='">
                            <div class="price-badge">
                                <div class="price-item">
                                    <i class="fas fa-plane"></i>
                                    <span>€89-120</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <h3>Londra, Regno Unito</h3>
                            <p>La capitale britannica tra storia, cultura e modernità</p>
                            <div class="card-features">
                                <span class="feature"><i class="fas fa-landmark"></i> Storia</span>
                                <span class="feature"><i class="fas fa-theater-masks"></i> Cultura</span>
                                <span class="feature"><i class="fas fa-shopping-bag"></i> Shopping</span>
                            </div>
                            <div class="price-details">
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-plane"></i> Volo:</span>
                                    <span class="price-value">€89-120</span>
                                </div>
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-bed"></i> Hotel:</span>
                                    <span class="price-value">Da definire</span>
                                </div>
                                <div class="price-actions">
                                    <a href="https://www.skyscanner.it/transport/flights/rome/lond/251206/251208/config/10525-2512061405--31915-0-16574-2512061550%7C16574-2512080600--31915-0-10525-2512080945?adultsv2=1&childrenv2=&cabinclass=economy&rtn=1&preferdirects=true&outboundaltsenabled=false&inboundaltsenabled=false" target="_blank" class="flight-details-btn" onclick="event.stopPropagation()">
                                        <i class="fas fa-external-link-alt"></i>
                                        Vedi dettagli volo
                                    </a>
                                </div>
                            </div>
                            <div class="card-buttons-container">
                                <button class="card-button">
                                    Scopri il viaggio <i class="fas fa-arrow-right"></i>
                                </button>
                                <button class="card-vote-button" onclick="event.stopPropagation(); openVotingModal('london')">
                                    <i class="fas fa-vote-yea"></i>
                                    Vota questa destinazione
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Destination 3 -->
                    <div class="destination-card" onclick="openDestination('birmingham')">
                        <div class="card-image">
                            <img src="https://images.unsplash.com/photo-1582407947304-fd86f028f716?w=800&h=600&fit=crop&crop=center" alt="Birmingham" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjNzY0YmEyIi8+Cjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5CaXJtaW5naGFtPC90ZXh0Pgo8L3N2Zz4='">
                            <div class="price-badge">
                                <div class="price-item">
                                    <i class="fas fa-plane"></i>
                                    <span>€95-130</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <h3>Birmingham, Regno Unito</h3>
                            <p>Il cuore industriale dell'Inghilterra con un'anima creativa</p>
                            <div class="card-features">
                                <span class="feature"><i class="fas fa-industry"></i> Storia</span>
                                <span class="feature"><i class="fas fa-music"></i> Musica</span>
                                <span class="feature"><i class="fas fa-utensils"></i> Cucina</span>
                            </div>
                            <div class="price-details">
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-plane"></i> Volo:</span>
                                    <span class="price-value">€95-130</span>
                                </div>
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-bed"></i> Hotel:</span>
                                    <span class="price-value">Da definire</span>
                                </div>
                                <div class="price-actions">
                                    <a href="https://www.skyscanner.it/trasporti/voli/rome/birm/251206/251208/config/10525-2512061440--31915-0-9909-2512061615%7C9909-2512080715--32174-0-11493-2512081100?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=1&outboundaltsenabled=false&inboundaltsenabled=false&departure-times=450-1439&preferdirects=true" target="_blank" class="flight-details-btn" onclick="event.stopPropagation()">
                                        <i class="fas fa-external-link-alt"></i>
                                        Vedi dettagli volo
                                    </a>
                                </div>
                            </div>
                            <div class="card-buttons-container">
                                <button class="card-button">
                                    Scopri il viaggio <i class="fas fa-arrow-right"></i>
                                </button>
                                <button class="card-vote-button" onclick="event.stopPropagation(); openVotingModal('birmingham')">
                                    <i class="fas fa-vote-yea"></i>
                                    Vota questa destinazione
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Destination 4 -->
                    <div class="destination-card" onclick="openDestination('geneva')">
                        <div class="card-image">
                            <img src="https://images.unsplash.com/photo-1528722828814-77b9b83aafb2?w=800&h=600&fit=crop&crop=center" alt="Ginevra" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZjA5M2ZiIi8+Cjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5HaW5ldnJhPC90ZXh0Pgo8L3N2Zz4='">
                            <div class="price-badge">
                                <div class="price-item">
                                    <i class="fas fa-plane"></i>
                                    <span>€110-150</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <h3>Ginevra, Svizzera</h3>
                            <p>Elegante città svizzera tra lago e montagne</p>
                            <div class="card-features">
                                <span class="feature"><i class="fas fa-water"></i> Lago</span>
                                <span class="feature"><i class="fas fa-mountain"></i> Montagne</span>
                                <span class="feature"><i class="fas fa-gem"></i> Lusso</span>
                            </div>
                            <div class="price-details">
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-plane"></i> Volo:</span>
                                    <span class="price-value">€110-150</span>
                                </div>
                                <div class="price-row">
                                    <span class="price-label"><i class="fas fa-bed"></i> Hotel:</span>
                                    <span class="price-value">Da definire</span>
                                </div>
                                <div class="price-actions">
                                    <a href="https://www.skyscanner.it/trasporti/voli/rome/gene/251206/251208/config/11493-2512061610--32356-0-12015-2512061745%7C12015-2512080650--32356-0-11493-2512080820?adultsv2=1&cabinclass=economy&childrenv2=&ref=home&rtn=1&preferdirects=true&outboundaltsenabled=false&inboundaltsenabled=false" target="_blank" class="flight-details-btn" onclick="event.stopPropagation()">
                                        <i class="fas fa-external-link-alt"></i>
                                        Vedi dettagli volo
                                    </a>
                                </div>
                            </div>
                            <div class="card-buttons-container">
                                <button class="card-button">
                                    Scopri il viaggio <i class="fas fa-arrow-right"></i>
                                </button>
                                <button class="card-vote-button" onclick="event.stopPropagation(); openVotingModal('geneva')">
                                    <i class="fas fa-vote-yea"></i>
                                    Vota questa destinazione
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Destination Detail Modal -->
    <div id="destinationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Voting Modal -->
    <div id="votingModal" class="modal">
        <div class="modal-content voting-modal">
            <span class="close" onclick="closeVotingModal()">&times;</span>
            <div class="voting-content">
                <h3>Vota questa destinazione</h3>
                <p id="votingDestinationName" class="voting-destination-name"></p>
                <p class="voting-user-info">
                    <i class="fas fa-user-circle"></i>
                    Connesso come: <strong id="votingUserInfo"></strong>
                </p>
                
                <p id="authError" class="auth-error"></p>
                
                <div class="voting-buttons">
                    <button class="vote-btn vote-yes" onclick="vote('yes')">
                        <i class="fas fa-thumbs-up"></i>
                        Sì, mi piace!
                    </button>
                    <button class="vote-btn vote-no" onclick="vote('no')">
                        <i class="fas fa-thumbs-down"></i>
                        No, non mi convince
                    </button>
                </div>
                <div class="comment-section">
                    <h4>Lascia un commento</h4>
                    <textarea id="commentText" placeholder="Condividi la tua opinione su questa destinazione..."></textarea>
                </div>
                <button class="submit-vote-btn" onclick="submitVote()">
                    <i class="fas fa-paper-plane"></i>
                    Invia votazione
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Votes Modal -->
    <div id="adminVotesModal" class="modal">
        <div class="modal-content admin-votes-modal">
            <span class="close" onclick="closeAdminVotesModal()">&times;</span>
            <div class="admin-votes-content">
                <h2><i class="fas fa-chart-bar"></i> Tutte le votazioni</h2>
                <div id="allVotesContainer">
                    <p>Caricamento votazioni...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content logout-modal">
            <div class="logout-modal-content">
                <div class="logout-modal-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <h3>Conferma logout</h3>
                <p>Sei sicuro di voler uscire?</p>
                <div class="logout-modal-buttons">
                    <button class="logout-confirm-btn" onclick="confirmLogout()">
                        <i class="fas fa-check"></i>
                        Sì, esci
                    </button>
                    <button class="logout-cancel-btn" onclick="cancelLogout()">
                        <i class="fas fa-times"></i>
                        Annulla
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Viaggio Soul Dance</h4>
                    <p>Creiamo esperienze di viaggio che risvegliano l'anima</p>
                </div>
                <div class="footer-section">
                    <h4>Contatti</h4>
                    <p><i class="fas fa-envelope"></i> info@viaggiosouldance.com</p>
                    <p><i class="fas fa-phone"></i> +39 123 456 7890</p>
                </div>
                <div class="footer-section">
                    <h4>Seguici</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Viaggio Soul Dance. Tutti i diritti riservati.</p>
            </div>
        </div>
    </footer>
    </div> <!-- Chiudi div mainContent -->

    <!-- Supabase Configuration -->
    <script src="supabase-config.js"></script>
    <script src="auth-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
