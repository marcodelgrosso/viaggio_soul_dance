<!-- 
    ESEMPIO: Come mostrare le statistiche delle votazioni nella homepage
    
    Puoi aggiungere questo HTML e JavaScript per mostrare il conteggio dei voti
    direttamente nelle card delle destinazioni
-->

<!-- Aggiungi questo dentro la card-content di ogni destination-card, dopo le price-details -->
<div class="vote-stats" id="vote-stats-seville">
    <div class="vote-stat-row">
        <span class="vote-stat-label"><i class="fas fa-thumbs-up"></i> Voti positivi:</span>
        <span class="vote-stat-value" id="vote-yes-count-seville">-</span>
    </div>
    <div class="vote-stat-row">
        <span class="vote-stat-label"><i class="fas fa-thumbs-down"></i> Voti negativi:</span>
        <span class="vote-stat-value" id="vote-no-count-seville">-</span>
    </div>
    <div class="vote-stat-total">
        Totale voti: <span id="vote-total-seville">-</span>
    </div>
</div>

<!-- Aggiungi questo JavaScript alla fine di script.js per mostrare le statistiche -->
<script>
// Funzione per aggiornare le statistiche di una destinazione
async function updateVoteStats(destinationId) {
    try {
        if (typeof getDestinationVoteCount === 'function') {
            const stats = await getDestinationVoteCount(destinationId);
            
            // Aggiorna gli elementi HTML con le statistiche
            document.getElementById(`vote-yes-count-${destinationId}`).textContent = stats.yes;
            document.getElementById(`vote-no-count-${destinationId}`).textContent = stats.no;
            document.getElementById(`vote-total-${destinationId}`).textContent = stats.total;
        }
    } catch (error) {
        console.error(`Errore nel recupero delle statistiche per ${destinationId}:`, error);
    }
}

// Aggiorna le statistiche quando la pagina Ã¨ caricata
document.addEventListener('DOMContentLoaded', function() {
    // Aggiorna le statistiche per tutte le destinazioni
    const destinations = ['seville', 'london', 'birmingham', 'geneva'];
    
    destinations.forEach(dest => {
        updateVoteStats(dest);
    });
    
    // Opzionale: aggiorna le statistiche ogni 30 secondi
    setInterval(() => {
        destinations.forEach(dest => {
            updateVoteStats(dest);
        });
    }, 30000);
});

// Aggiorna le statistiche dopo aver inviato un voto
const originalSubmitVote = window.submitVote;
window.submitVote = async function() {
    await originalSubmitVote();
    
    // Aggiorna le statistiche dopo l'invio
    if (currentDestination) {
        await updateVoteStats(currentDestination);
    }
};
</script>

<!-- Aggiungi questi stili CSS per le statistiche -->
<style>
.vote-stats {
    background: var(--light-bg);
    padding: 1rem;
    border-radius: var(--border-radius);
    margin-top: 1rem;
    border-left: 4px solid var(--primary-color);
}

.vote-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0;
}

.vote-stat-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-light);
    font-size: 0.9rem;
    font-weight: 500;
}

.vote-stat-label i {
    color: var(--primary-color);
    font-size: 0.9rem;
}

.vote-stat-value {
    font-weight: 600;
    color: var(--primary-color);
    font-size: 1rem;
}

.vote-stat-total {
    margin-top: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px solid #e2e8f0;
    text-align: center;
    font-weight: 600;
    color: var(--text-dark);
    font-size: 0.95rem;
}

.vote-stat-total span {
    color: var(--primary-color);
    font-size: 1.1rem;
}
</style>

